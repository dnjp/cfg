"""""""""""""""""""""""""""""""""""""""""""""""""""
"	       	     NOTES
" - 7c represents pipe character 
" -  represents <space>
"""""""""""""""""""""""""""""""""""""""""""""""""""

"""""""""""""""""""""""""""""""""""""""""""""""""""
"                   defaults
"""""""""""""""""""""""""""""""""""""""""""""""""""
set shell=/usr/local/plan9/bin/rc

"""""""""""""""""""""""""""""""""""""""""""""""""""
"                     tags
"""""""""""""""""""""""""""""""""""""""""""""""""""
set tags=tags

"""""""""""""""""""""""""""""""""""""""""""""""""""
"                     indentation
"""""""""""""""""""""""""""""""""""""""""""""""""""
set tabstop=8
set autoindent wrapmargin=8
set shiftwidth=8

"""""""""""""""""""""""""""""""""""""""""""""""""""
"                     visuals
"""""""""""""""""""""""""""""""""""""""""""""""""""
set nomesg
set showmode
set showmatch
set matchtime=3
set nonumber
set noflash
set ruler
set verbose
set leftright
set searchincr		
set wrapscan
set report=1

" ^V^V^V<tab>
set filec=	
set cedit=
set terse
set path=.
set tildeop

"""""""""""""""""""""""""""""""""""""""""""""""""""
"                     navigation
"""""""""""""""""""""""""""""""""""""""""""""""""""

map gg 1G
map qq :q!
map ss :w

" space-l : go to previous buffer
map  l :e #

" double space to bg vi
map    :w:suspend

" fuzzy find file in pwd tree
map  f :vs /tmp/fzffile:r!echo `{pwd}^`{sk 7c sed 's/\.\//\//g'} "zy$:q!:Goedit "zp

" fuzzy find file in git tree
map  F :vs /tmp/fzffile:r!sk -c 'git ls-files `{git rev-parse --show-toplevel}'"zy$:q!:Goedit "zp


"""""""""""""""""""""""""""""""""""""""""""""""""""
"                   convenience
"""""""""""""""""""""""""""""""""""""""""""""""""""
map F :!f 

" make
map  m :!make 

" generate tags
map  t :!ctags -R .

" replacement
map rr :'m,'k s/

" pull up man page for word under cursor
map K wb"zyw::o:!man "zp

" use comment command from nyne
" ctrl-/ to un/comment current line
map  :.!com -f %

" space-ctrl-/ to un/comment current selection
map   :'m,'k!com -f % 

" replace builtin >> command to use a+/a- commands from nyne
map >> :.!a+ -f % -t 8
map << :.!a- -f % -t 8

" space-{>>/<<} to un/indent selection
map  >> :'m,'k!a+ -f % -t 8
map  << :'m,'k!a- -f % -t 8

" plan9 plumber
map 9p wb"zyy:E /tmp/plumbfile"zp:.!sed 's/"//g'"zyy:o"zpI:!plumb 

"""""""""""""""""""""""""""""""""""""""""""""""""""
"                   clipboard
"""""""""""""""""""""""""""""""""""""""""""""""""""

map  p :read ! xclip -o -sel clip
" map  y :'m,'k!xclip -sel clip && xclip -o -sel clip
map  y :E /tmp/pastefilep:.,$!xclip -sel clip 

"""""""""""""""""""""""""""""""""""""""""""""""""""
"                      git
"""""""""""""""""""""""""""""""""""""""""""""""""""

" git search for word under cursor
map g/ wb"zye::o:!git grep "zp

" git status
map gs :!git status

" git add
map ga :!git add 

" git add
map gA :!git add -A

" git commit
map gc :!git commit -am '

" git push
map gp :!git push

" git blame on file
" TODO: this should print in prettier columns
map gb :E"zy1G:edit /tmp/blamefile"zp:.,$!wc -l"zyy:.,$!git blame -- #:o"zpI:

"""""""""""""""""""""""""""""""""""""""""""""""""""
"                   formatting
"""""""""""""""""""""""""""""""""""""""""""""""""""

" 8 space indentation
map 8 :set tabstop=8:set shiftwidth=8

" 4 space indentation
map 4 :set tabstop=4:set shiftwidth=4

" 2 space indentation
map 2 :set ts=2:set sw=2

" format document using fmt
map gF :%!fmt -s

" format paragraph using fmt
map gf !}fmt

" rust
map gr :%rustfmt

" go
map go :%!gofmt
map gd :!go doc 
map gt :!cd `{dirname %} && go test 

" prettier
" map ge :%!prettier %
map ge :%!prettier --print-width 80 --prose-wrap always %

