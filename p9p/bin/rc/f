#!/usr/local/plan9/bin/rc

ignore='tags|TAGS|node_modules|.git'
pattern=$*
for(file in `{ du -a ./ | awk '{print $2}' | sed 's/\.\/\//.\//g' | grep -v $ignore}){
	switch(`{ file $file }){
	case *Ascii*
		grep -n $pattern $file | awk '{print "'^$file:^'"$0}'
	case *program*
		grep -n $pattern $file | awk '{print "'^$file:^'"$0}'
	}
}

