#!/usr/local/plan9/bin/rc

ignore='tags|TAGS|node_modules|.git'
pattern=$*
for(file in `{ du -a ./ | awk '{print $2}' | sed 's/\.\/\//.\//g' | grep -v $ignore}){
	isascii=`{ file $file | grep -v *.out | awk '{print $2}' | grep Ascii }
	if(1 = $isascii){
		grep -n $pattern $file | awk '{print "'^$file:^'"$0}'
	}
}

